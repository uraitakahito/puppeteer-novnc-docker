[unix_http_server]
file=/tmp/supervisor.sock

[supervisord]
nodaemon=true
logfile=/tmp/supervisord.log
pidfile=/tmp/supervisord.pid
childlogdir=/tmp

[supervisorctl]
serverurl=unix:///tmp/supervisor.sock

[program:chromium]
command=/app/start-chromium.sh
environment=CHROMIUM_CONFIG="/app/chromium-headful.conf"
autostart=true
autorestart=true
startsecs=3
startretries=5
stdout_logfile=/tmp/chromium-stdout.log
stderr_logfile=/tmp/chromium-stderr.log
stdout_logfile_maxbytes=10MB
stderr_logfile_maxbytes=10MB
# Graceful shutdown settings
stopsignal=TERM
stopwaitsecs=10
killasgroup=true
stopasgroup=true

[program:socat]
command=socat TCP-LISTEN:9222,reuseaddr,fork TCP:localhost:9223
autostart=true
autorestart=true
startsecs=1
stdout_logfile=/tmp/socat-stdout.log
stderr_logfile=/tmp/socat-stderr.log
stdout_logfile_maxbytes=1MB
stderr_logfile_maxbytes=1MB
# Graceful shutdown settings
stopsignal=TERM
stopwaitsecs=5
killasgroup=true
stopasgroup=true
